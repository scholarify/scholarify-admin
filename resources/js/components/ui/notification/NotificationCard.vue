
<script setup lang="ts">
import { NotificationCard } from './notificationCard';
import { onMounted } from 'vue';

const props = defineProps<{
    type?: string;
    message: string;
    visible: boolean;
}>();
const defEmits = defineEmits<{
    (e: 'close'): void; // Événement émis quand on ferme
}>();
const card = new NotificationCard(props.type, props.message, props.visible);
const emit = defEmits;

</script>

<template>
    <div
    v-if="visible"
    id="notificationContainer"  class="w-full  text-sm font-medium p-3 rounded-[5px] flex justify-between items-center gap-3"
    :class="card.getBgClass()">
        <div class="flex flex-col gap-3">
            <div class="flex items-center gap-1">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.4375 6.5625C8.4375 6.31527 8.51081 6.0736 8.64817 5.86804C8.78552 5.66248 8.98074 5.50226 9.20915 5.40765C9.43756 5.31304 9.68889 5.28829 9.93137 5.33652C10.1738 5.38475 10.3966 5.5038 10.5714 5.67862C10.7462 5.85343 10.8653 6.07616 10.9135 6.31864C10.9617 6.56111 10.937 6.81245 10.8424 7.04085C10.7477 7.26926 10.5875 7.46448 10.382 7.60184C10.1764 7.73919 9.93473 7.8125 9.6875 7.8125C9.35598 7.8125 9.03804 7.6808 8.80362 7.44638C8.5692 7.21196 8.4375 6.89402 8.4375 6.5625ZM18.4375 10C18.4375 11.6688 17.9427 13.3001 17.0155 14.6876C16.0884 16.0752 14.7706 17.1566 13.2289 17.7952C11.6871 18.4338 9.99064 18.6009 8.35393 18.2754C6.71721 17.9498 5.2138 17.1462 4.03379 15.9662C2.85378 14.7862 2.05019 13.2828 1.72463 11.6461C1.39907 10.0094 1.56616 8.31286 2.20477 6.77111C2.84338 5.22936 3.92484 3.9116 5.31238 2.98448C6.69992 2.05735 8.33122 1.5625 10 1.5625C12.237 1.56498 14.3817 2.45473 15.9635 4.03653C17.5453 5.61833 18.435 7.763 18.4375 10ZM16.5625 10C16.5625 8.70206 16.1776 7.43327 15.4565 6.35407C14.7354 5.27487 13.7105 4.43374 12.5114 3.93704C11.3122 3.44034 9.99272 3.31038 8.71972 3.5636C7.44672 3.81681 6.2774 4.44183 5.35962 5.35961C4.44183 6.27739 3.81682 7.44672 3.5636 8.71972C3.31038 9.99272 3.44034 11.3122 3.93704 12.5114C4.43374 13.7105 5.27488 14.7354 6.35407 15.4565C7.43327 16.1776 8.70206 16.5625 10 16.5625C11.7399 16.5606 13.408 15.8686 14.6383 14.6383C15.8686 13.408 16.5606 11.7399 16.5625 10ZM10.9375 12.8656V10.3125C10.9375 9.8981 10.7729 9.50067 10.4799 9.20764C10.1868 8.91462 9.7894 8.75 9.375 8.75C9.1536 8.74967 8.93923 8.82771 8.76986 8.97029C8.60048 9.11287 8.48703 9.31079 8.4496 9.52901C8.41217 9.74722 8.45318 9.97164 8.56536 10.1625C8.67754 10.3534 8.85365 10.4984 9.0625 10.5719V13.125C9.0625 13.5394 9.22712 13.9368 9.52015 14.2299C9.81317 14.5229 10.2106 14.6875 10.625 14.6875C10.8464 14.6878 11.0608 14.6098 11.2301 14.4672C11.3995 14.3246 11.513 14.1267 11.5504 13.9085C11.5878 13.6903 11.5468 13.4659 11.4346 13.275C11.3225 13.0841 11.1464 12.9391 10.9375 12.8656Z" fill="#F43F5E"/>
                </svg>
                <span class="text-[16px] font-[600] " :class="card.getTextClass()">
                    {{ card.getTitle() }}
                </span>
            </div>
            <p class="text-[12px] pl-6 font-[400] " :class="card.getTextClass()" style="line-height: 20px; letter-spacing: -0.6%;">{{ card.getMessage()}}</p>
        </div>
        <div class="close-notification cursor-pointer" @click="$emit('close')">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.2878 14.961C16.4639 15.1371 16.5628 15.376 16.5628 15.6251C16.5628 15.8741 16.4639 16.113 16.2878 16.2891C16.1116 16.4652 15.8728 16.5642 15.6237 16.5642C15.3746 16.5642 15.1358 16.4652 14.9596 16.2891L9.99948 11.3274L5.03776 16.2876C4.86164 16.4637 4.62277 16.5626 4.3737 16.5626C4.12462 16.5626 3.88575 16.4637 3.70963 16.2876C3.53351 16.1114 3.43457 15.8726 3.43457 15.6235C3.43457 15.3744 3.53351 15.1356 3.70963 14.9594L8.67135 9.99928L3.7112 5.03756C3.53508 4.86144 3.43613 4.62257 3.43613 4.3735C3.43613 4.12443 3.53508 3.88556 3.7112 3.70944C3.88732 3.53332 4.12619 3.43437 4.37526 3.43437C4.62433 3.43437 4.8632 3.53332 5.03932 3.70944L9.99948 8.67116L14.9612 3.70866C15.1373 3.53254 15.3762 3.43359 15.6253 3.43359C15.8743 3.43359 16.1132 3.53254 16.2893 3.70866C16.4654 3.88478 16.5644 4.12365 16.5644 4.37272C16.5644 4.62179 16.4654 4.86066 16.2893 5.03678L11.3276 9.99928L16.2878 14.961Z" fill="#575D5E"/>
            </svg>
        </div>
    </div>
</template>
